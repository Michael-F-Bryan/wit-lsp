<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Usage"><title>build_info - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="build_info" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.2 (25ef9e3d8 2024-04-09)" data-channel="1.77.2" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../build_info/index.html">build_info</a><span class="version">0.0.36</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../build_info/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">build_info</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/build_info/lib.rs.html#1-42">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>Begin by adding <code>build-info</code> as a <code>[dependency]</code> and <code>build-info-build</code> as a <code>[build-dependency]</code> to your <a href="sample/Cargo.toml"><code>Cargo.toml</code></a>.
By separating those two crates, pure compile-time dependencies, such as <code>git2</code> are not compiled into your final program.
For this to work properly, <a href="https://blog.rust-lang.org/2021/03/25/Rust-1.51.0.html#cargos-new-feature-resolver">ensure to opt in to resolver “2”</a>.</p>
<p>If it does not already exist, add a <a href="https://github.com/danielschemmel/build-info/tree/main/sample/build.rs"><code>build.rs</code></a> to your project’s root, where you call <code>build_info_build::build_script()</code>.
This will collect build information at compile time.</p>
<p>Then, either use the <code>build_info!</code> macro to add a function that returns version information at runtime:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="macro">build_info::build_info!</span>(<span class="kw">fn </span>version);</code></pre></div>
<p>or use <code>build_info::format!</code> to generate a string at compile time:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="comment">// sample output: "{sample v0.0.13 built with rustc 1.45.0-nightly (4bd32c980 2020-05-29) at 2020-05-30 11:22:46Z}"
</span><span class="macro">build_info::format!</span>(<span class="string">"{{{} v{} built with {} at {}}}"</span>, $.crate_info.name, $.crate_info.version, $.compiler, $.timestamp)</code></pre></div>
<p>The <a href="https://github.com/danielschemmel/build-info/tree/main/sample">sample</a> project shows both variants.</p>
<h3 id="features"><a class="doc-anchor" href="#features">§</a>Features</h3>
<p>The <code>build_info</code> crate supports several feature flags:</p>
<ul>
<li>The <code>runtime</code> feature enables <code>build_info::build_info!</code>. It is enabled by default, but if you intend to only use <code>build_info::format!</code>, it is safe to disable this flag. Disable this feature to use <code>build_info</code> in a <code>no_std</code> context.</li>
<li>The <code>chrono</code> feature enables the default features of the <code>chrono</code> package, which is used by <code>build_info::build_info!</code>. It is disabled by default.</li>
<li>The <code>serde</code> feature adds <code>Serialize</code>/<code>Deserialize</code> support to the types used by <code>build_info::build_info!</code>. It is disabled by default.</li>
</ul>
<h2 id="caveats"><a class="doc-anchor" href="#caveats">§</a>Caveats</h2>
<p>The build script will ask cargo to rerun it whenever the project or the currently checked out commit changes.
It will not necessarily be rerun if only the dependencies change (<code>build_info_build::build_script</code> will try to find the lockfile and depend on it, but it is not really aware of any of the more intricate features, such as, cargo workspaces).
Please open an issue if your specific use case requires a more strict rerun policy for <code>build.rs</code> and include a short description what additional files should trigger a rebuild when changed.</p>
<h2 id="copyright-and-license"><a class="doc-anchor" href="#copyright-and-license">§</a>Copyright and license</h2>
<p>This project is copyright its authors and licensed under either of</p>
<ul>
<li>Apache License, Version 2.0, (LICENSE-APACHE or http://www.apache.org/licenses/LICENSE-2.0)</li>
<li>MIT license (LICENSE-MIT or http://opensource.org/licenses/MIT)
at your option.</li>
</ul>
<h3 id="contribution"><a class="doc-anchor" href="#contribution">§</a>Contribution</h3>
<p>Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in this project, as defined in the Apache-2.0 license, shall be dual licensed as above, without any additional terms or conditions.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.chrono"><code>pub use build_info_common::<a class="mod" href="../chrono/index.html" title="mod chrono">chrono</a>;</code></div></li><li><div class="item-name" id="reexport.semver"><code>pub use build_info_common::<a class="mod" href="../semver/index.html" title="mod semver">semver</a>;</code></div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.build_info.html" title="macro build_info::build_info">build_info</a></div><div class="desc docblock-short">Generates a function that returns a reference to the <code>BuildInfo</code> structure for the crate.</div></li><li><div class="item-name"><a class="macro" href="macro.format.html" title="macro build_info::format">format</a></div><div class="desc docblock-short">Generates a string at compile-time that includes build information.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BuildInfo.html" title="struct build_info::BuildInfo">BuildInfo</a></div><div class="desc docblock-short">Information about the current build</div></li><li><div class="item-name"><a class="struct" href="struct.CompilerInfo.html" title="struct build_info::CompilerInfo">CompilerInfo</a></div><div class="desc docblock-short"><code>rustc</code> version and configuration</div></li><li><div class="item-name"><a class="struct" href="struct.CpuInfo.html" title="struct build_info::CpuInfo">CpuInfo</a></div></li><li><div class="item-name"><a class="struct" href="struct.CrateInfo.html" title="struct build_info::CrateInfo">CrateInfo</a></div><div class="desc docblock-short">Information about the current crate (i.e., the crate for which build information has been generated)</div></li><li><div class="item-name"><a class="struct" href="struct.GitInfo.html" title="struct build_info::GitInfo">GitInfo</a></div><div class="desc docblock-short">Information about a git repository</div></li><li><div class="item-name"><a class="struct" href="struct.TargetInfo.html" title="struct build_info::TargetInfo">TargetInfo</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CompilerChannel.html" title="enum build_info::CompilerChannel">CompilerChannel</a></div><div class="desc docblock-short"><code>rustc</code> distribution channel (some compiler features are only available on specific channels)</div></li><li><div class="item-name"><a class="enum" href="enum.Endianness.html" title="enum build_info::Endianness">Endianness</a></div><div class="desc docblock-short">CPU Endianness</div></li><li><div class="item-name"><a class="enum" href="enum.OptimizationLevel.html" title="enum build_info::OptimizationLevel">OptimizationLevel</a></div><div class="desc docblock-short">The various possible optimization levels</div></li><li><div class="item-name"><a class="enum" href="enum.VersionControl.html" title="enum build_info::VersionControl">VersionControl</a></div><div class="desc docblock-short">Support for different version control systems</div></li></ul></section></div></main></body></html>